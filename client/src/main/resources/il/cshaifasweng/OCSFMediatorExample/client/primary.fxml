<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.text.*?>

<ScrollPane fitToHeight="false" fitToWidth="true" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="il.cshaifasweng.OCSFMediatorExample.client.PrimaryController">
   <content>
      <AnchorPane fx:id="mainAnchorPane" minHeight="670.0" minWidth="1200.0">
         <children>
            <Rectangle arcHeight="5.0" arcWidth="5.0" fill="#ffc0cb" height="60.0" stroke="BLACK" strokeType="INSIDE" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0" />
            <Label layoutX="19.0" layoutY="8.0" text="Lilac">
               <font><Font name="Bell MT Italic" size="36.0" /></font>
            </Label>

            <Button fx:id="loginButton" onAction="#handleLogin" text="Login" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="15.0">
               <font><Font name="Bell MT" size="14.0" /></font>
            </Button>

            <Label fx:id="userStatusLabel" text="Hi, username" visible="false" AnchorPane.rightAnchor="110.0" AnchorPane.topAnchor="20.0">
               <font><Font name="Bell MT" size="12.0" /></font>
            </Label>

            <Button fx:id="logoutButton" mnemonicParsing="false" onAction="#handleLogout" style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-background-radius: 8;" text="Logout" visible="false" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="15.0">
               <font><Font name="System Bold" size="14.0" /></font>
            </Button>

            <Separator layoutY="60.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" />

            <HBox fx:id="customerMenuBar" alignment="CENTER" spacing="10.0" visible="false" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="70.0">
               <children>
                  <Button onAction="#handleCatalog" text="Catalog" />
                  <Button onAction="#handleCart" text="My Cart" />
                  <Button onAction="#handleOrdersScreen" text="My Orders" />
                  <Button text="Complaints" onAction="#handleOpenComplaints"/>


                   <!-- NEW: customer-only button (controller toggles visibility) -->
                  <Button fx:id="makeCustomBouquetButton"
                          text="Make a Custom Bouquet"
                          onAction="#handleMakeCustomBouquet"
                          visible="false" managed="false"/>



                   <Pane HBox.hgrow="ALWAYS" />
                   <!-- Inbox (top-right) -->
                   <Button fx:id="inboxButton"
                           text="📥 Inbox"
                           onAction="#handleInbox"
                           visible="false" managed="false">
                       <font><Font name="System Bold" size="14.0"/></font>
                   </Button>
                  <Button onAction="#handleProfile" style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-background-radius: 8;" text="👤 Profile">
                     <font><Font name="System Bold" size="14.0" /></font>
                  </Button>
               </children>
            </HBox>

            <HBox fx:id="employeeMenuBar" alignment="CENTER" spacing="10.0" visible="false" AnchorPane.leftAnchor="20.0" AnchorPane.rightAnchor="20.0" AnchorPane.topAnchor="70.0">
               <children>
                  <Button onAction="#handleAddProduct" text="Add Product" />
                  <Button fx:id="reportButton" onAction="#handleViewReports" text="Reports" />
                  <Button onAction="#handleManageComplaints" text="Manage Complaints" />
                  <Pane HBox.hgrow="ALWAYS" />
               </children>
            </HBox>

            <HBox alignment="CENTER" layoutY="120.0" spacing="15.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
               <children>
                  <Label fx:id="catalogLabel" text="Catalog">
                     <font><Font name="Bell MT Bold" size="36.0" /></font>
                  </Label>
                  <HBox alignment="CENTER" style="-fx-background-color: white; -fx-border-color: #cccccc; -fx-border-radius: 20; -fx-background-radius: 20;">
                     <padding><Insets bottom="5" left="10" right="5" top="5" /></padding>
                     <children>
                        <Label text="🔍"><font><Font size="16.0" /></font></Label>
                        <TextField fx:id="searchTextField" promptText="Search by name..." style="-fx-background-color: transparent; -fx-border-color: transparent;" />
                     </children>
                  </HBox>
                  <ComboBox fx:id="typeFilterComboBox" promptText="Filter by Type" />
                  <TextField fx:id="minPriceField" promptText="Min Price" prefWidth="100" />
                  <TextField fx:id="maxPriceField" promptText="Max Price" prefWidth="100" />
                  <Button fx:id="clearFiltersButton" onAction="#handleClearFilters" text="Clear Filters" />

                  <!-- NEW: optional status label for custom mode -->
                  <Label fx:id="customStatusLabel"
                         text=""
                         visible="false" managed="false"/>
               </children>
            </HBox>

            <ProgressIndicator fx:id="loadingIndicator" visible="false" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="350.0" />

            <VBox AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="180.0">
               <padding><Insets bottom="20" left="20" right="20" /></padding>
               <children>
                  <GridPane fx:id="catalogGrid" hgap="20" vgap="20">
                     <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" percentWidth="33.3" />
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" percentWidth="33.3" />
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" percentWidth="33.3" />
                     </columnConstraints>
                  </GridPane>
               </children>
            </VBox>
         </children>
      </AnchorPane>
   </content>
</ScrollPane>
